<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
        #app {
            font-family: "Avenir", Helvetica, Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            /* text-align: center; */
            color: #2c3e50;
            /* margin-top: 60px; */
        }
    </style>
    <!-- 引入样式文件 -->
    <link rel="stylesheet" href="./styles/vant.css">
    <title>谊众CRM系统</title>
</head>

<body>
    <div id="app">
        <van-cell><span>录入人员：{{ operator.name }}——{{ operator.mobile }}</span></van-cell>
        <van-cell>
            <van-button type="primary" style="width: 100%" @click="sendDispatch">确认分配</van-button>
        </van-cell>
    </div>
</body>
<!-- 引入 Vue 和 Vant 的 JS 文件 -->
<script type="text/javascript" src="./libs/vue.min.js"></script>
<script type="text/javascript" src="./libs/vue-router.js"></script>
<script type="text/javascript" src="./libs/httpVueLoader.js"></script>
<script type="text/javascript" src="./libs/vant.min.js"></script>
<script type="text/javascript" src="./libs/axios.min.js"></script>
<script type="text/javascript" src="./libs/jweixin-1.2.0.js"></script>
<script type="text/javascript" src="./libs/common.js"></script>
<script>
    //const routes = [];
    //const router = new VueRouter({ mode: 'history', routes });
    const router = new VueRouter({ mode: 'history' });

    const app = new Vue({
        el: "#app",
        router,
        data: {
            employer: { name: '', mobile: '', id: '' },
            operator: { name: '', mobile: '', id: '' }
        },
        mounted: function () {
            getTicket().then(r => this.operator = r);
        },
        props: {
            employer: Object
        },
        methods: {
            sendDispatch() {
                //window.console.log(this.$data);
                return axios.get("/yz/referred/dispatch", {
                    params: {
                        employer: this.employer,
                        operator: this.operator
                    }
                })
                    .then(r => vant.Toast.success(r.msg))
                    .catch(err => vant.Toast.fail("操作失败！"));
            }
        }
    })
</script>

</html>